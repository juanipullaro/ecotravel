{% extends "base.html" %}
{% block body %}
{% include "navbar.html" %}>
<link rel="stylesheet" href="./static/css/account.css">
<link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css">
    
  
  <div class="tab">
    <button class="tablinks" onclick="openCity(event, 'Perfil')" id="defaultOpen">Perfil</button>
    <button class="tablinks" onclick="openCity(event, 'Mis viajes')">Mis viajes</button>
    <button class="tablinks" onclick="openCity(event, 'Calificaciones')">Mis calificaciones</button>
    <button class="tablinks" onclick="openCity(event, 'Alertas')">Mis alertas</button>
  </div>
  
  <div id="Perfil" class="tabcontent">
      <article class="media content-section1">
          <img class="rounded-circle article-img1" src="{{ image_file }}">
          <div class="media-body1">
              <div class="article-metadata1">
                  <a class="mr1-2" href="#">{{ current_user.name|capitalize}} {{ current_user.surname|capitalize}} </a>
                  <button type="button" class="btn btn-danger btn-sm m-1v" onclick="openCity(event, 'Editar')">Editar perfil</button>
              </div>
              <div class="data">
                  <i class="fa fa-quote-left" aria-hidden="true"></i><div class="comentaccount">Busco viajes en donde compartir un momento agradable y además abaratar costos y tiempo</div>
                  <i class="fa fa-user" aria-hidden="true"></i><div class="usernameaccount">{{ current_user.username }} </div>
                  <i class="fa fa-envelope" aria-hidden="true"></i> <div class="emailaccount">{{ current_user.email }} </div>
                  <i class="fa fa-mobile bigger" aria-hidden="true"></i> <div class="phoneaccount">0336154599077</div>           
              </div>
          </div>
      </article>
  </div>
       

  <div id="Editar" class="tabcontent">
    <div id="signin-box-account" class="signin-box-account">
      <div class="signin-area-account">
        <form method="POST" action="" enctype="multipart/form-data">
          {{ form.hidden_tag() }}
          <fieldset class="form-group">
              <legend class="border-bottom mb-4">Actualizá tus datos</legend>
              <div class="form-group">
                  {{ form.username.label(class="form-control-label") }}
                  {% if form.username.errors %}
                      {{ form.username(class="form-control form-control-lg is-invalid") }}
                      <div class="invalid-feedback">
                          {% for error in form.username.errors %}
                              <span>{{ error }}</span>
                          {% endfor %}
                      </div>
                  {% else %}
                      {{ form.username(class="form-control form-control-lg") }}
                  {% endif %}
              </div>
              <div class="form-group">
                  {{ form.email.label(class="form-control-label") }}
                  {% if form.email.errors %}
                      {{ form.email(class="form-control form-control-lg is-invalid") }}
                      <div class="invalid-feedback">
                          {% for error in form.email.errors %}
                              <span>{{ error }}</span>
                          {% endfor %}
                      </div>
                  {% else %}
                      {{ form.email(class="form-control form-control-lg") }}
                  {% endif %}
              </div>
              <div class="form-group">
                  {{ form.picture.label() }}
                  {{ form.picture(class="form-control-file") }}
                  {% if form.picture.errors %}
                      {% for error in form.picture.errors %}
                          <span class="text-danger">{{ error }}</span></br>
                      {% endfor %}
                  {% endif %}
              </div>
          </fieldset>
          <div class="form-group">
              {{ form.submit(class="btn btn-outline-info") }}
          </div>
      </form>
   </div>
    </div>
  </div>
 
  <div id="Mis viajes" class="tabcontent">
    {% for travel in travels %}
      <article class="media content-section">
          <img class="rounded-circle article-img" src="{{'/static/profile_pics/' + travel.driver.image_file}}">
          <div class="media-body">
            <div class="article-metadata">
              <a class="mr-2" href="#">{{ travel.driver.name|capitalize}} {{ travel.driver.surname|capitalize}} </a>
                  <button type="button" class="btn btn-danger btn-sm m-1" data-toggle="modal" data-target="#deleteModal">Eliminar viaje</button> 
                  <a class="btn btn-danger btn-sm m-1v2"href="{{ url_for('update_travels', travel_id=travel.id) }}">Editar viaje</a>
                  <div class="btn-group">
                    <button type="button" class="btn btn-danger btn-sm m-1v3"
                            data-toggle="dropdown">
                            {{ travel.travel_requests|length}} Solicitudes de viaje <span class="caret"></span>
                    </button>
                  
                    <ul class="dropdown-menu" role="menu">
                      <li><a href="{{ url_for('account')}}">  {% for request in travel.travel_requests %}
                        <div class="passagers">{{request.passenger.name|capitalize}} {{request.passenger.surname|capitalize}}</div>
                        <button type="button" class="btn-danger btn-sm m-1request">Aceptar</button><button type="button" class="btn-danger btn-sm m-1request2">Rechazar</button>
                        {% endfor %}</a></li>

                    </ul>
                  </div>
                  
            </div>
            <div class="data">
                <i class="fa fa-map-marker ori" aria-hidden="true"></i><div class="oriaccount"> {{travel.origin.location}} </div>
                <i class="fa fa-flag-checkered des" aria-hidden="true"></i> <div class="desaccount">{{travel.dest.location}} </div>
                <i class="fa fa-calendar" aria-hidden="true"></i>  <div class="fecaccount">
                    <script>
                        var meses = new Array ("Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre");
                        var diasSemana = new Array("Lunes","Martes","Miércoles","Jueves","Viernes","Sábado","Domingo");
                        var f=new Date('{{ travel.travel_date.strftime("%Y-%m-%d") }}'  );
                        document.write(diasSemana[f.getDay()] + ", " + (f.getDate()+1) + " de " + meses[f.getMonth()] + " de " + f.getFullYear());
                    </script>  </div>
              <i class="fa fa-clock-o" aria-hidden="true"></i> <div class="horaccount"> {{ travel.travel_hour }}</div>
            </div>
          </div>
      </article>
<!-- Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="deleteModalLabel">Seguro quiere eliminar el viaje?</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
        <form action="{{ url_for('delete_post', id_viaje=travel.id) }}" method="POST">
          <input class="btn btn-danger" type="submit" value="Eliminar">
        </form>
      </div>
    </div>
  </div>
</div>
{% endfor %} 
</div>





  
  <div id="Mis calificaciones" class="tabcontent">
    <h3>Tokyo</h3>
    <p>Tokyo is the capital of Japan.</p>
  </div>

  <div id="Mis alertas" class="tabcontent">
    <h3>Tokyo</h3>
    <p>Tokyo is the capital of Japan.</p>
  </div>
  
  <script>
  function openCity(evt, cityName) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
      tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
      tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    document.getElementById(cityName).style.display = "block";
    evt.currentTarget.className += " active";
  }
  
  // Get the element with id="defaultOpen" and click on it
  document.getElementById("defaultOpen").click();
  </script>

    {% endblock body %}-->

    